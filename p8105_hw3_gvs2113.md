p8105 Homework 3 (UNI:gvs2113)
================
2023-10-06

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

## Problem 1

This problem uses a cleaned and reduced version of a dataset entitled:
“The Instacart Online Grocery Shopping Dataset 2017” that was accessed
on June 24, 2017. As a leading online grocery service, Instacart allows
you to shop online from local grocery stores and thus provides us with a
dataset involving observations about each grocery order and its user.
More specifically, the entire 2017 dataset is an anonymized dataset with
over 3 million orders from over 200,000 users. With that, let’s see what
we can find out by using a more manageable version of the 2017 data…

``` r
library(p8105.datasets)
data("instacart")
```

At first glance, the `instacart` data set consists of 15 columns and
1384617 observations. The information provided in this data set reveals
characteristics of the buyer, their buying habits, the food order and
the food products included. There is data included for a total of 131209
orders placed using the Instacart app. Many of the variables in the
dataset hold a collection of identification numbers for the order, the
products, the customer,and the department and aisle in which the product
is found. It is notable that the all of the orders in dataset we are
using belong to the `train` evaluation set, indicated by the `eval_set`
column. There is also informative time related data associated with the
day of the week and hour of the day each order was placed. Most often,
orders were placed on the 0th day of the week at 14rd hour, which here
means Sunday at 2pm.

Now to answer the questions for the homework assignment:

How many aisles are there, and which aisles are most items ordered from?

``` r
instacart |> 
  group_by(aisle) |> 
  summarize(count = n()) |> nrow()  # total aisles 
```

    ## [1] 134

``` r
instacart |> 
  group_by(aisle) |> 
  summarize(count = n()) |> top_n(3) # most ordered from aisle 
```

    ## Selecting by count

    ## # A tibble: 3 × 2
    ##   aisle                       count
    ##   <chr>                       <int>
    ## 1 fresh fruits               150473
    ## 2 fresh vegetables           150609
    ## 3 packaged vegetables fruits  78493

Thus, there are 134 total aisles and the top 3 most ordered from aisles
are: fresh vegetables, fresh fruits and packages vegetables fruits.

Plot that shows the number of items ordered in each aisle:

``` r
instacart |> 
  group_by(aisle, department) |> 
  summarize(items = n()) |> 
  filter(items > 1000) |> 
  ggplot(aes(x = aisle, y = items)) +
  geom_point() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

    ## `summarise()` has grouped output by 'aisle'. You can override using the
    ## `.groups` argument.

![](p8105_hw3_gvs2113_files/figure-gfm/unnamed-chunk-4-1.png)<!-- -->

A little crowded, but gets the point across. Best viewed in Zoom panel
due to number of aisles.

Table showing three most popular items in specified aisles and include
number of orders for each:

``` r
instacart |> 
  filter(aisle == c("baking ingredients", "dog food care", "packaged vegetables fruits")) |> 
  group_by(aisle, product_name) |> 
  summarize(items = n()) |> 
  top_n(3) |> 
  knitr::kable(digits = 1)
```

    ## `summarise()` has grouped output by 'aisle'. You can override using the
    ## `.groups` argument.
    ## Selecting by items

| aisle                      | product_name                                    | items |
|:---------------------------|:------------------------------------------------|------:|
| baking ingredients         | Light Brown Sugar                               |   157 |
| baking ingredients         | Organic Vanilla Extract                         |   122 |
| baking ingredients         | Pure Baking Soda                                |   140 |
| dog food care              | Organix Chicken & Brown Rice Recipe             |    13 |
| dog food care              | Organix Grain Free Chicken & Vegetable Dog Food |    14 |
| dog food care              | Original Dry Dog                                |     9 |
| packaged vegetables fruits | Organic Baby Spinach                            |  3324 |
| packaged vegetables fruits | Organic Blueberries                             |  1692 |
| packaged vegetables fruits | Organic Raspberries                             |  1920 |

Table showing mean hour of the day at which Pink Lady Apples and Coffee
Ice Cream are ordered on each day of the week:

``` r
instacart |> 
  filter(product_name == c("Pink Lady Apples", "Coffee Ice Cream")) |> 
  group_by(product_name, order_dow) |> 
  summarize(
    mean_hour = mean(order_hour_of_day)
  ) |> 
  knitr::kable(digits = 1)
```

    ## Warning: There was 1 warning in `filter()`.
    ## ℹ In argument: `product_name == c("Pink Lady Apples", "Coffee Ice Cream")`.
    ## Caused by warning in `product_name == c("Pink Lady Apples", "Coffee Ice Cream")`:
    ## ! longer object length is not a multiple of shorter object length

    ## `summarise()` has grouped output by 'product_name'. You can override using the
    ## `.groups` argument.

| product_name     | order_dow | mean_hour |
|:-----------------|----------:|----------:|
| Coffee Ice Cream |         0 |      13.2 |
| Coffee Ice Cream |         1 |      15.0 |
| Coffee Ice Cream |         2 |      15.3 |
| Coffee Ice Cream |         3 |      15.4 |
| Coffee Ice Cream |         4 |      15.2 |
| Coffee Ice Cream |         5 |      10.3 |
| Coffee Ice Cream |         6 |      12.4 |
| Pink Lady Apples |         0 |      12.2 |
| Pink Lady Apples |         1 |      11.7 |
| Pink Lady Apples |         2 |      12.0 |
| Pink Lady Apples |         3 |      13.9 |
| Pink Lady Apples |         4 |      11.9 |
| Pink Lady Apples |         5 |      13.9 |
| Pink Lady Apples |         6 |      11.6 |

## Problem 2

``` r
library(p8105.datasets)
data("brfss_smart2010")
```
